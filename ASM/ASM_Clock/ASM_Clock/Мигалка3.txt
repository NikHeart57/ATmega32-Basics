						; Подключение заголовочных файлов
.INCLUDE "m32def.inc"		; Подключен заголовочный файл в котором хранятся адреса и символические имена.. 
							; ..регистров (типа: PORTA, DDRA, TIMSK и т.д.)
						; Присвоение символических имен				
.DEF temp1 = r16			; Присвоение символического имени регистру r16 
.DEF temp2 = r17			; Присвоение символического имени регистру r17
							; *Для справки: у AtMega32 регистры общего назначения - r16-r25
.DSEG					; Прописываются ячейки оперативной памяти (стека) к которым будем обращатся. В данном случае их нет

.CSEG					; Начало програмного сегмента
.ORG 0x00				; Начальное значение для адресации. Указатель на вектор 0 - RESET. Данное прерываение вызывается при первом запуске или при триггере ножки RESET 

RESET:					; Начало кода вектора RESET
	LDI temp1, Low(RAMEND)	; Инициализация стека - Обязательно!!!
	OUT SPL,temp1			; Инициализация стека..
	LDI temp1, High(RAMEND) ; Инициализация стека..
	OUT SPH,temp1			; Инициализация стека
	LDI temp1, 0xff			; Запись числа 0xff в регистр temp1 (r16)	*(1 - выход, 0 - вход)
	OUT DDRC, temp1			; Отправка значения temp1 в регистр DDRC	*(реальный адрес $14)
	LDI temp1, 0			; Обнуление регистра temp1

Main:					; Начало кода программы
	INC temp1				; Инкремент регистра temp
	OUT PORTC, temp1		; Перенос регистра в PORTC
	CALL Delay
	RJMP Main

Delay:
	PUSH temp1;
DLoop:
    SUBI temp1, 0xff			; (r18r19)-1  вычитание двухбайтного целого числа
    SBCI temp2, 0x00
    BRNE DLoop				; если значение в r24 не равно нулю, то переход на начало операции вычитания
	POP temp1
	RET

RJMP RESET